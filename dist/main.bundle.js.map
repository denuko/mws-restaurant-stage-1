{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/main.js","webpack:///./node_modules/idb/lib/idb.js","webpack:///./src/js/dbhelper.js","webpack:///./src/js/helper.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./src/css/styles.css?067e"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","347","e","_helper","document","addEventListener","event","updateRestaurants","getElementById","window","initMap","self","map","google","maps","Map","zoom","center","lat","lng","scrollwheel","addMarkersToMap","cSelect","nSelect","cIndex","selectedIndex","nIndex","cuisine","neighborhood","DBHelper","fetchRestaurantByCuisineAndNeighborhood","error","restaurants","console","resetRestaurants","fillRestaurantsHTML","getLazyLoadPlugin","getGoogleMapsApi","innerHTML","markers","forEach","setMap","arguments","length","ul","restaurant","addRestaurants","addRestaurantToDatabase","append","createRestaurantHTML","neighborhoods","includes","push","cuisines","cuisine_type","select","option","createElement","li","picture","image","className","alt","imageFilename","imageUrlForRestaurant","noImgFallback","addImageSourceToPicture","setAttribute","imagesResized","imageNamesBySize","medium","small","more","href","urlForRestaurant","tabIndex","address","marker","mapMarkerForRestaurant","addListener","location","url","promisifyRequest","request","Promise","resolve","reject","onsuccess","result","onerror","promisifyRequestCall","obj","method","args","apply","then","proxyProperties","ProxyClass","targetProp","properties","prop","this","set","val","proxyRequestMethods","Constructor","proxyMethods","proxyCursorRequestMethods","Cursor","Index","index","_index","cursor","_cursor","_request","ObjectStore","store","_store","Transaction","idbTransaction","_tx","complete","oncomplete","onabort","UpgradeDB","db","oldVersion","transaction","_db","DB","IDBIndex","IDBCursor","methodName","createIndex","IDBObjectStore","objectStore","IDBTransaction","createObjectStore","IDBDatabase","funcName","replace","arr","Array","slice","callback","nativeObject","getAll","query","count","instance","items","iterateCursor","continue","exp","open","version","upgradeCallback","indexedDB","onupgradeneeded","delete","92","configurable","writable","navigator","serviceWorker","idb","upgradeDb","keyPath","fetch","DATABASE_URL","response","json","catch","id","DATABASE_PROMISE","openCursor","checkIfRestaurantFound","fetchRestaurants","find","results","filter","tx","log","viewRestaurants","v","uniqueNeighborhoods","indexOf","uniqueCuisines","photograph","Marker","position","latlng","title","animation","Animation","DROP","put","openDatabase","srcset","media","source","fileExtension","filename","split","pop","filenameWithoutExtension","filenames","large","IntersectionObserver","entries","observer","isIntersecting","intersectionRatio","mapOffline","mapOfflineMessage","appendChild","loadjs","unobserve","rootMargin","threshold","observe","w","b","getElementsByTagName","async","src","lazyLoadOptions","elements_selector","css","Error","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","JSON","stringify","95","stylesInDom","isOldIE","fn","memo","all","atob","getElement","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","item","domStyle","refs","j","parts","addStyle","listToStyles","list","newStyles","base","part","sourceMap","insertStyleElement","style","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","attrs","type","addAttrs","el","keys","update","remove","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","replaceText","textStore","replacement","Boolean","join","cssNode","childNodes","content","hmr","locals"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 347);\n","import './../css/styles.css';\r\nimport {addImageSourceToPicture, imageNamesBySize, getGoogleMapsApi, getLazyLoadPlugin} from './helper.js';\r\nimport DBHelper from './dbhelper.js';\r\n\r\nlet restaurants;\r\nlet neighborhoods = [];\r\nlet cuisines = [];\r\nvar map\r\nvar markers = []\r\n\r\n/**\r\n * Fetch restaurants as soon as the page is loaded.\r\n */\r\ndocument.addEventListener('DOMContentLoaded', (event) => {\r\n    updateRestaurants();\r\n});\r\ndocument.getElementById('cuisines-select').addEventListener('change', (event) => {\r\n    updateRestaurants();\r\n});\r\ndocument.getElementById('neighborhoods-select').addEventListener('change', (event) => {\r\n    updateRestaurants();\r\n});\r\n\r\n/**\r\n * Set neighborhoods HTML.\r\n */\r\nconst fillNeighborhoodsHTML = (neighborhoods = self.neighborhoods) => {\r\n    const select = document.getElementById('neighborhoods-select');\r\n    neighborhoods.forEach(neighborhood => {\r\n        const option = document.createElement('option');\r\n        option.innerHTML = neighborhood;\r\n        option.value = neighborhood;\r\n        select.append(option);\r\n    });\r\n}\r\n\r\n/**\r\n * Set cuisines HTML.\r\n */\r\nconst fillCuisinesHTML = (cuisines = self.cuisines) => {\r\n    const select = document.getElementById('cuisines-select');\r\n\r\n    cuisines.forEach(cuisine => {\r\n        const option = document.createElement('option');\r\n        option.innerHTML = cuisine;\r\n        option.value = cuisine;\r\n        select.append(option);\r\n    });\r\n}\r\n\r\n/**\r\n * Initialize Google map, called from HTML.\r\n */\r\nwindow.initMap = () => {\r\n    let loc = {\r\n        lat: 40.722216,\r\n        lng: -73.987501\r\n    };\r\n    self.map = new google.maps.Map(document.getElementById('map'), {\r\n        zoom: 12,\r\n        center: loc,\r\n        scrollwheel: false\r\n    });\r\n\r\n    // Add markers to the map after being initialized\r\n    addMarkersToMap();\r\n}\r\n\r\n/**\r\n * Update page and map for current restaurants.\r\n */\r\nconst updateRestaurants = () => {\r\n    const cSelect = document.getElementById('cuisines-select');\r\n    const nSelect = document.getElementById('neighborhoods-select');\r\n\r\n    const cIndex = cSelect.selectedIndex;\r\n    const nIndex = nSelect.selectedIndex;\r\n\r\n    const cuisine = cSelect[cIndex].value;\r\n    const neighborhood = nSelect[nIndex].value;\r\n\r\n    DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, (error, restaurants) => {\r\n        if (error) { // Got an error!\r\n            console.error(error);\r\n        } else {\r\n            resetRestaurants(restaurants);\r\n            fillRestaurantsHTML();\r\n            // Include LazyLoad plugin\r\n            getLazyLoadPlugin();\r\n            // Include maps api dynamically only after everything else has been done\r\n            getGoogleMapsApi();\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * Clear current restaurants, their HTML and remove their map markers.\r\n */\r\nconst resetRestaurants = (restaurants) => {\r\n    // Remove all restaurants\r\n    self.restaurants = [];\r\n    const ul = document.getElementById('restaurants-list');\r\n    ul.innerHTML = '';\r\n\r\n    // Remove all map markers\r\n    if (self.markers) {\r\n        self.markers.forEach(m => m.setMap(null));\r\n    }\r\n    self.markers = [];\r\n    self.restaurants = restaurants;\r\n}\r\n\r\n/**\r\n * Create all restaurants HTML and add them to the webpage.\r\n */\r\nconst fillRestaurantsHTML = (restaurants = self.restaurants) => {\r\n    const ul = document.getElementById('restaurants-list');\r\n    restaurants.forEach(restaurant => {\r\n        if (DBHelper.addRestaurants()) {\r\n            DBHelper.addRestaurantToDatabase(restaurant);\r\n        }\r\n        ul.append(createRestaurantHTML(restaurant));\r\n\r\n        if (!self.neighborhoods) {\r\n            self.neighborhoods = [];\r\n        }\r\n        if (!self.neighborhoods.includes(restaurant.neighborhood)) {\r\n            self.neighborhoods.push(restaurant.neighborhood);\r\n        }\r\n\r\n        if (!self.cuisines) {\r\n            self.cuisines = [];\r\n        }\r\n        if (!self.cuisines.includes(restaurant.cuisine_type)) {\r\n            self.cuisines.push(restaurant.cuisine_type);\r\n        }\r\n    });\r\n\r\n    fillNeighborhoodsHTML();\r\n    fillCuisinesHTML();\r\n}\r\n\r\n/**\r\n * Create restaurant HTML.\r\n */\r\nconst createRestaurantHTML = (restaurant) => {\r\n    const li = document.createElement('li');\r\n\r\n    // create picture element for restaurant image in restaurant list\r\n    const picture = document.createElement('picture');\r\n    const image = document.createElement('img');\r\n    image.className = 'restaurant-img lazy';\r\n    image.alt = restaurant.name;\r\n\r\n    const imageFilename = DBHelper.imageUrlForRestaurant(restaurant);\r\n    if (imageFilename == 'noimg') {\r\n        // If restaurant has not an image, display a no image svg\r\n        // and use its corresponding png as a fallback.\r\n        // Author of the noimg.svg and noimg.png is credited at page's footer.\r\n        const noImgFallback = `${imageFilename}.png`;\r\n        addImageSourceToPicture(picture, `${imageFilename}.svg`);\r\n        addImageSourceToPicture(picture, noImgFallback);\r\n\r\n        image.setAttribute('data-src', noImgFallback);\r\n        image.className += ' noimg';\r\n        // TODO: Fix noimg png fallback in IE\r\n    } else {\r\n        // get all possible names of an image depending on its size (small, medium, large)\r\n        const imagesResized = imageNamesBySize(imageFilename);\r\n        // add source to picture element for medium screens\r\n        addImageSourceToPicture(picture, imagesResized.medium, '(min-width: 363px) and (max-width:479px)');\r\n\r\n        image.setAttribute('data-src', imagesResized.small);\r\n    }\r\n\r\n    picture.append(image);\r\n    li.append(picture);\r\n\r\n    const name = document.createElement('h3');\r\n    li.append(name);\r\n\r\n    const more = document.createElement('a');\r\n    more.href = DBHelper.urlForRestaurant(restaurant);\r\n    more.innerHTML = restaurant.name;\r\n    more.tabIndex = 0;\r\n    name.append(more);\r\n\r\n    const neighborhood = document.createElement('p');\r\n    neighborhood.innerHTML = restaurant.neighborhood;\r\n    li.append(neighborhood);\r\n\r\n    const address = document.createElement('p');\r\n    address.innerHTML = restaurant.address;\r\n    li.append(address);\r\n\r\n    return li\r\n}\r\n\r\n/**\r\n * Add markers for current restaurants to the map.\r\n */\r\nconst addMarkersToMap = (restaurants = self.restaurants) => {\r\n    restaurants.forEach(restaurant => {\r\n        // Add marker to the map\r\n        const marker = DBHelper.mapMarkerForRestaurant(restaurant, self.map);\r\n        google.maps.event.addListener(marker, 'click', () => {\r\n            window.location.href = marker.url\r\n        });\r\n        self.markers.push(marker);\r\n    });\r\n}\r\n","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function(event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","import idb from 'idb';\r\n\r\n/**\r\n * Common database helper functions.\r\n */\r\nclass DBHelper {\r\n\r\n    /**\r\n     * Database Promise.\r\n     * Returns the constant defined after the DBHelper class \r\n     * with the opened database.\r\n     */\r\n    static get DATABASE_PROMISE() {\r\n        return DATABASE_PROMISE;\r\n    }\r\n\r\n    /**\r\n     * Database URL.\r\n     * Change this to restaurants.json file location on your server.\r\n     */\r\n    static get DATABASE_URL() {\r\n        const port = 1337; // Change this to your server port\r\n        return `http://localhost:${port}/restaurants`;\r\n    }\r\n\r\n    /**\r\n     * Call the variable defined after the DBHelper class which is a bool\r\n     * that indicates whether to store a restaurant into database\r\n     * before adding its html.\r\n     */\r\n    static addRestaurants() {\r\n        return addRestaurants;\r\n    }\r\n\r\n    static openDatabase() {\r\n        // If the browser doesn't support service worker,\r\n        // we don't care about having a database\r\n        if (!navigator.serviceWorker) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        return  idb.open('restaurants-db', 1, upgradeDb => {\r\n            switch (upgradeDb.oldVersion) {\r\n                case 0:\r\n                    upgradeDb.createObjectStore('restaurants', {keyPath: 'id'});\r\n                    const restaurantsStore = upgradeDb.transaction.objectStore('restaurants');\r\n                    restaurantsStore.createIndex('id', 'id');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch all restaurants.\r\n     */\r\n    static fetchRestaurants(callback) {\r\n        fetch(DBHelper.DATABASE_URL)\r\n                .then(response => response.json())\r\n                .then(restaurants => callback(null, restaurants))\r\n                .catch(error => callback(error, null));\r\n    }\r\n\r\n    /**\r\n     * Fetch a restaurant by its ID.\r\n     */\r\n    static fetchRestaurantById(id, callback) {\r\n        DBHelper.DATABASE_PROMISE.then(db => {\r\n            const tx = db.transaction('restaurants');\r\n\r\n            return tx.objectStore('restaurants').index('id').openCursor();\r\n        }).then(function checkIfRestaurantFound(cursor) {\r\n            if (!cursor)\r\n                return;\r\n            if (cursor.value.id == id) {\r\n                return cursor.value;\r\n            } else {\r\n                return cursor.continue().then(checkIfRestaurantFound);\r\n            }\r\n        }).then(restaurant => {\r\n            if (restaurant) {\r\n                callback(null, restaurant);\r\n            } else {\r\n                // fetch all restaurants with proper error handling.\r\n                DBHelper.fetchRestaurants((error, restaurants) => {\r\n                    if (error) {\r\n                        callback(error, null);\r\n                    } else {\r\n                        const restaurant = restaurants.find(r => r.id == id);\r\n                        if (restaurant) { // Got the restaurant\r\n                            callback(null, restaurant);\r\n                            DBHelper.addRestaurantToDatabase(restaurant);\r\n                        } else { // Restaurant does not exist in the database\r\n                            callback('Restaurant does not exist', null);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch restaurants by a cuisine type with proper error handling.\r\n     */\r\n    static fetchRestaurantByCuisine(cuisine, callback) {\r\n        // Fetch all restaurants  with proper error handling\r\n        DBHelper.fetchRestaurants((error, restaurants) => {\r\n            if (error) {\r\n                callback(error, null);\r\n            } else {\r\n                // Filter restaurants to have only given cuisine type\r\n                const results = restaurants.filter(r => r.cuisine_type == cuisine);\r\n                callback(null, results);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch restaurants by a neighborhood with proper error handling.\r\n     */\r\n    static fetchRestaurantByNeighborhood(neighborhood, callback) {\r\n        // Fetch all restaurants\r\n        DBHelper.fetchRestaurants((error, restaurants) => {\r\n            if (error) {\r\n                callback(error, null);\r\n            } else {\r\n                // Filter restaurants to have only given neighborhood\r\n                const results = restaurants.filter(r => r.neighborhood == neighborhood);\r\n                callback(null, results);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n     */\r\n    static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\r\n        DBHelper.DATABASE_PROMISE.then(db => {\r\n            const tx = db.transaction('restaurants');\r\n            const restaurantsStore = tx.objectStore('restaurants');\r\n\r\n            return tx.objectStore('restaurants').getAll();\r\n        }).then(restaurants => {\r\n            if (!restaurants.length) {\r\n                addRestaurants = true;\r\n                // Fetch all restaurants\r\n                DBHelper.fetchRestaurants((error, restaurants) => {\r\n                    if (error) {\r\n                        callback(error, null);\r\n                    } else {\r\n                        DBHelper.viewRestaurants(restaurants, cuisine, neighborhood, callback);\r\n                        addRestaurants = false;\r\n                    }\r\n                });\r\n            } else {\r\n                console.log('Restaurants:', restaurants);\r\n                DBHelper.viewRestaurants(restaurants, cuisine, neighborhood, callback);\r\n            }\r\n        }).catch(error => callback(error, null));\r\n    }\r\n\r\n    static viewRestaurants(restaurants, cuisine, neighborhood, callback) {\r\n        let results = restaurants\r\n        if (cuisine != 'all') { // filter by cuisine\r\n            results = results.filter(r => r.cuisine_type == cuisine);\r\n        }\r\n        if (neighborhood != 'all') { // filter by neighborhood\r\n            results = results.filter(r => r.neighborhood == neighborhood);\r\n        }\r\n        callback(null, results);\r\n    }\r\n\r\n    /**\r\n     * Fetch all neighborhoods with proper error handling.\r\n     */\r\n    static fetchNeighborhoods(callback) {\r\n        // Fetch all restaurants\r\n        DBHelper.fetchRestaurants((error, restaurants) => {\r\n            if (error) {\r\n                callback(error, null);\r\n            } else {\r\n                // Get all neighborhoods from all restaurants\r\n                const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood)\r\n                // Remove duplicates from neighborhoods\r\n                const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) == i)\r\n                callback(null, uniqueNeighborhoods);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch all cuisines with proper error handling.\r\n     */\r\n    static fetchCuisines(callback) {\r\n        // Fetch all restaurants\r\n        DBHelper.fetchRestaurants((error, restaurants) => {\r\n            if (error) {\r\n                callback(error, null);\r\n            } else {\r\n                // Get all cuisines from all restaurants\r\n                const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type)\r\n                // Remove duplicates from cuisines\r\n                const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) == i)\r\n                callback(null, uniqueCuisines);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Restaurant page URL.\r\n     */\r\n    static urlForRestaurant(restaurant) {\r\n        return (`./restaurant.html?id=${restaurant.id}`);\r\n    }\r\n\r\n    /**\r\n     * Restaurant image URL.\r\n     */\r\n    static imageUrlForRestaurant(restaurant) {\r\n        // Check if restaurant object has a photograph\r\n        if ('photograph' in restaurant) {\r\n            return (`/img/${restaurant.photograph}`);\r\n        } else {\r\n            // If restaurant has not a photograph return 'noimg' so that the\r\n            // rest of the code knows what to do\r\n            return 'noimg';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Map marker for a restaurant.\r\n     */\r\n    static mapMarkerForRestaurant(restaurant, map) {\r\n        const marker = new google.maps.Marker({\r\n            position: restaurant.latlng,\r\n            title: restaurant.name,\r\n            url: DBHelper.urlForRestaurant(restaurant),\r\n            map: map,\r\n            animation: google.maps.Animation.DROP}\r\n        );\r\n        return marker;\r\n    }\r\n\r\n    /**\r\n     * Add restaurant to database.\r\n     */\r\n    static addRestaurantToDatabase(restaurant) {\r\n        DBHelper.DATABASE_PROMISE.then(function(db) {\r\n            var tx = db.transaction('restaurants', 'readwrite');\r\n            var restaurantsStore = tx.objectStore('restaurants');\r\n            restaurantsStore.put(restaurant);\r\n\r\n            return tx.complete;\r\n        }).then(function() {\r\n            console.log('Restaurant added');\r\n        });\r\n    }\r\n}\r\n\r\nconst DATABASE_PROMISE = DBHelper.openDatabase();\r\nlet addRestaurants = false;\r\n\r\nexport default DBHelper;","/**\r\n * helper.js contains functions that help not repeat code\r\n * in order to keep the code in other js files tidied up\r\n */\r\n\r\n/**\r\n * Create source element and append it to picture element.\r\n */\r\nexport const addImageSourceToPicture = (picture, srcset, media) => {\r\n    const source = document.createElement('source');\r\n    if (media !== undefined) {\r\n        source.media = media;\r\n    }\r\n    source.setAttribute('data-srcset', srcset);\r\n    picture.append(source);\r\n};\r\n\r\n/**\r\n * Extract extension from filename.\r\n */\r\nexport const fileExtension = (filename) => {\r\n    return filename.split('.').pop();\r\n};\r\n\r\n/**\r\n * Get filename without extension.\r\n */\r\nexport const filenameWithoutExtension = (filename) => {\r\n    return filename.replace(/.[^.]+$/, '');\r\n};\r\n\r\n/**\r\n * Get all possible names of an image depending on its size (small, medium, large).\r\n */\r\nexport const imageNamesBySize = (imageFilename) => {\r\n    const imageExtension = 'jpg';\r\n    const filenames = {};\r\n    filenames.small = `${imageFilename}-small.${imageExtension}`;\r\n    filenames.medium = `${imageFilename}-medium.${imageExtension}`;\r\n    filenames.large = `${imageFilename}-large.${imageExtension}`;\r\n\r\n    return filenames;\r\n};\r\n\r\n/**\r\n * Include google maps api on the fly.\r\n * Google map is lazy loaded using the IntersectionObserver API.\r\n * The code for this function is from the \r\n * Lazy loading Google Maps with the IntersectionObserver API article:\r\n * https://walterebert.com/blog/lazy-loading-google-maps-with-the-intersection-observer-api/\r\n * The only thing changed is that muicss loadJS is used instead of \r\n * Filament Group loadJS used in the original, to load js scripts on the fly.\r\n * Check for offline state to not load google maps script is added.\r\n */\r\nexport const getGoogleMapsApi = () => {\r\n    'use strict';\r\n\r\n    const options = {\r\n        rootMargin: '400px',\r\n        threshold: 0\r\n    };\r\n\r\n    const map = document.getElementById('map');\r\n\r\n    // Lazy loading Google Maps with the IntersectionObserver API\r\n    const observer = new IntersectionObserver(\r\n            (entries, observer) => {\r\n        // Detect intersection https://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/#comment-102838\r\n        const isIntersecting = typeof entries[0].isIntersecting === 'boolean' ? entries[0].isIntersecting : entries[0].intersectionRatio > 0;\r\n        if (isIntersecting) {\r\n            // Check if page is offline\r\n            if ((` ${map.className} `).replace(/[\\n\\t]/g, ' ').indexOf(' offline ') > -1) {\r\n                // If page is offline, show corresponding message on map\r\n                if (!document.getElementById('map-offline')) {\r\n                    // Display a map load failure message\r\n                    const mapOffline = document.createElement('div');\r\n                    mapOffline.id = 'map-offline';\r\n\r\n                    const mapOfflineMessage = document.createElement('span');\r\n                    mapOfflineMessage.innerHTML = 'No internet connection. Failed to load map.';\r\n                    mapOfflineMessage.id = 'map-offline-message';\r\n                    mapOffline.appendChild(mapOfflineMessage);\r\n\r\n                    map.append(mapOffline);\r\n                }\r\n            } else {\r\n                // Load google maps\r\n                // Scripts are loaded using muicss loadJS: https://github.com/muicss/loadjs\r\n                loadjs(['https://maps.googleapis.com/maps/api/js?key=AIzaSyBzXDGrWxj1GsJUbo9ZKSJPz07o2K1ljgc&libraries=places&callback=initMap']);\r\n                observer.unobserve(map);\r\n            }\r\n        }\r\n    }, options);\r\n\r\n    observer.observe(map);\r\n};\r\n\r\n/**\r\n * Include LazyLoad plugin: https://www.andreaverlicchi.eu/lazyload/#recipes\r\n */\r\nexport const getLazyLoadPlugin = () => {\r\n    // Conditionally load the best version of LazyLoad depending on the browser's support of the IntersectionObserver API. \r\n    (function(w, d) {\r\n        var b = d.getElementsByTagName('body')[0];\r\n        var s = d.createElement(\"script\");\r\n        s.async = true;\r\n        var v = !(\"IntersectionObserver\" in w) ? \"8.7.1\" : \"10.5.2\";\r\n        s.src = \"https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/\" + v + \"/lazyload.min.js\";\r\n        w.lazyLoadOptions = {\r\n            elements_selector: '.lazy'\r\n        }; // Your options here. See \"recipes\" for more information about async.\r\n        b.appendChild(s);\r\n    }(window, document));\r\n}\r\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\nvar content = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}